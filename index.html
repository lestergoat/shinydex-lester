<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ShinyDex complet</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f5;
      margin: 0; padding: 1rem;
      color: #222;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
    }
    #filters {
      text-align: center;
      margin-bottom: 1rem;
    }
    button {
      margin: 0 0.5rem;
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 0.3rem;
      cursor: pointer;
      background: #4caf50;
      color: white;
      font-weight: bold;
      transition: background 0.3s;
    }
    button:hover, button.active {
      background: #357a38;
    }
    .container {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: center;
    }
    .list {
      flex: 1 1 450px;
      background: white;
      border-radius: 10px;
      padding: 1rem;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    .list h2 {
      text-align: center;
      margin-top: 0;
    }
    .pokemon-card {
      display: flex;
      align-items: center;
      gap: 1rem;
      border-bottom: 1px solid #ddd;
      padding: 0.5rem 0;
    }
    .pokemon-card:last-child {
      border-bottom: none;
    }
    .pokemon-card img {
      width: 72px;
      height: 72px;
      image-rendering: pixelated;
    }
    .pokemon-info {
      flex-grow: 1;
    }
    .pokemon-info b {
      font-size: 1.1rem;
    }
    .types {
      font-size: 0.85rem;
      color: #555;
      margin-top: 0.2rem;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 0.4rem;
    }
    .controls label {
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.2rem;
      cursor: pointer;
    }
    input[type="checkbox"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
    }
    input[type="date"], input[type="text"], input[type="number"], select {
      font-size: 0.9rem;
      padding: 0.2rem 0.3rem;
      border-radius: 3px;
      border: 1px solid #ccc;
    }
    input[type="text"], select {
      min-width: 120px;
    }
    /* Scrollbar styling */
    .list::-webkit-scrollbar {
      width: 8px;
    }
    .list::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.2);
      border-radius: 4px;
    }
  </style>
</head>
<body>

  <h1>ShinyDex complet</h1>

  <div id="filters">
    <button id="btn-all" class="active">Voir tout</button>
    <button id="btn-to-get">√Ä obtenir</button>
    <button id="btn-captured">Captur√©s shiny</button>
  </div>

  <div class="container">
    <section class="list" id="to-get-list">
      <h2>Pok√©mon √† obtenir</h2>
      <div id="to-get-container"></div>
    </section>

    <section class="list" id="captured-list" style="display:none;">
      <h2>Pok√©mon captur√©s shiny</h2>
      <div id="captured-container"></div>
    </section>
  </div>

<script>
  // R√©cup√©ration et sauvegarde locale (localStorage) par Pok√©mon ID
  const STORAGE_KEY = "shinydexData";

  let pokemonData = [];
  let shinyStatus = {}; // { [id]: {captured: bool, date: str, surnom: str, ball: str, sexe: str, jeu: str, methode: str, rencontres: number} }

  // Champs par d√©fauts pour l'√©dition
  const defaultBall = "Pok√© Ball";
  const defaultSexe = "‚ôÇ";
  const defaultJeu = "√âcarlate";
  const defaultMethode = "Rencontre";

  // Elements DOM
  const toGetContainer = document.getElementById("to-get-container");
  const capturedContainer = document.getElementById("captured-container");

  const btnAll = document.getElementById("btn-all");
  const btnToGet = document.getElementById("btn-to-get");
  const btnCaptured = document.getElementById("btn-captured");

  // Chargement des donn√©es depuis localStorage
  function loadStorage() {
    const raw = localStorage.getItem(STORAGE_KEY);
    if(raw) {
      shinyStatus = JSON.parse(raw);
    }
  }

  // Sauvegarde dans localStorage
  function saveStorage() {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(shinyStatus));
  }

  // Cr√©e une carte Pok√©mon
  function createPokemonCard(p, captured) {
    const card = document.createElement("div");
    card.className = "pokemon-card";

    card.innerHTML = `
      <img src="${p.sprite}" alt="${p.nom} shiny" />
      <div class="pokemon-info">
        <b>#${p.id} - ${p.nom}</b>
        <div class="types">${p.types.join(" / ")}</div>
        <div class="controls">
          <label title="Captur√© en shiny">
            <input type="checkbox" class="captured-checkbox" ${captured ? "checked" : ""} />
            Captur√©
          </label>
          <label title="Date d'obtention">
            üìÖ <input type="date" class="input-date" value="${(shinyStatus[p.id]?.date) || ''}" />
          </label>
          <label title="Surnom">
            üè∑Ô∏è <input type="text" class="input-surnom" placeholder="Surnom" value="${(shinyStatus[p.id]?.surnom) || ''}" />
          </label>
          <label title="Ball">
            üé±
            <select class="input-ball">
              <option ${shinyStatus[p.id]?.ball === "Pok√© Ball" ? "selected" : ""}>Pok√© Ball</option>
              <option ${shinyStatus[p.id]?.ball === "Super Ball" ? "selected" : ""}>Super Ball</option>
              <option ${shinyStatus[p.id]?.ball === "Hyper Ball" ? "selected" : ""}>Hyper Ball</option>
              <option ${shinyStatus[p.id]?.ball === "Master Ball" ? "selected" : ""}>Master Ball</option>
              <option ${shinyStatus[p.id]?.ball === "Luxe Ball" ? "selected" : ""}>Luxe Ball</option>
            </select>
          </label>
          <label title="Sexe">
            ‚ö•
            <select class="input-sexe">
              <option ${shinyStatus[p.id]?.sexe === "‚ôÇ" ? "selected" : ""}>‚ôÇ</option>
              <option ${shinyStatus[p.id]?.sexe === "‚ôÄ" ? "selected" : ""}>‚ôÄ</option>
              <option ${shinyStatus[p.id]?.sexe === "Inconnu" ? "selected" : ""}>Inconnu</option>
            </select>
          </label>
          <label title="Jeu">
            üéÆ
            <select class="input-jeu">
              <option ${shinyStatus[p.id]?.jeu === "√âcarlate" ? "selected" : ""}>√âcarlate</option>
              <option ${shinyStatus[p.id]?.jeu === "Violet" ? "selected" : ""}>Violet</option>
              <option ${shinyStatus[p.id]?.jeu === "Arceus" ? "selected" : ""}>Arceus</option>
              <option ${shinyStatus[p.id]?.jeu === "Let's Go" ? "selected" : ""}>Let's Go</option>
              <option ${shinyStatus[p.id]?.jeu === "Autre" ? "selected" : ""}>Autre</option>
            </select>
          </label>
          <label title="M√©thode">
            üéØ
            <select class="input-methode">
              <option ${shinyStatus[p.id]?.methode === "Rencontre" ? "selected" : ""}>Rencontre</option>
              <option ${shinyStatus[p.id]?.methode === "Masuda" ? "selected" : ""}>Masuda</option>
              <option ${shinyStatus[p.id]?.methode === "Reset" ? "selected" : ""}>Reset</option>
              <option ${shinyStatus[p.id]?.methode === "Radar" ? "selected" : ""}>Radar</option>
              <option ${shinyStatus[p.id]?.methode === "Chaines" ?
